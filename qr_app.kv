#:kivy 2.0
#:import MDRaisedButton kivymd.uix.button.MDRaisedButton
#:import MDTopAppBar kivymd.uix.toolbar.MDTopAppBar

<MainScreen>:
    name: "main"
    
    MDBoxLayout:
        orientation: 'vertical'
        spacing: '15dp'
        padding: [dp(20), dp(20), dp(20), dp(30)] # dp(X) para unidades de densidad independientes

        # Barra superior
        MDTopAppBar:
            title: "QR Conquista"
            elevation: 4
            left_action_items: [["account-circle", lambda x: root.show_login_dialog()]]
            md_bg_color: app.theme_cls.primary_color # Mejor integración con el tema
            
        # Contenedor de Scroll para las aulas
        ScrollView:
            size_hint_y: 1
            MDBoxLayout:
                orientation: 'vertical'
                spacing: '10dp'
                size_hint_y: None
                height: self.minimum_height
                id: aulas_container
                opacity: 0
                disabled: True
                
        # Label de estado (ocupa espacio restante, pero limitado)
        MDLabel:
            id: main_label
            text: "Iniciá sesión para ver las aulas o escaneá un QR"
            halign: "center"
            size_hint_y: None
            height: "40dp"
            theme_text_color: "Hint" # Un color de texto más sutil

        # Botón Escanear
        MDRaisedButton:
            text: "Abrir Cámara y Escanear"
            pos_hint: {"center_x": 0.5}
            size_hint: (None, None)
            width: "220dp"
            height: "48dp"
            on_release: root.open_camera()
            md_bg_color: app.theme_cls.accent_color # Uso del color acento para el botón principal